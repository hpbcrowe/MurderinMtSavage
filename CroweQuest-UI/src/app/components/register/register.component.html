<h3 class="text-dark">Don't Have an Account?</h3>
<p class="text-dark">Please Fill Out The Form And Register.</p>

<form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
  <div class="form-group">
    <input
      type="text"
      [ngClass]="{
        'is-invalid': hasErrors('fullname') && isTouched('fullname'),
        'is-valid': !hasErrors('fullname') && isTouched('fullname')
      }"
      class="form-control form-control-lg"
      formControlName="fullname"
      placeholder="Full Name"
      title="Please enter your full name."
    />

    <div
      *ngIf="
        hasError('fullname', 'minlength') || hasError('fullname', 'maxlength')
      "
      class="invalid-feedback"
    >
      Must be between 10-30 characters
    </div>
  </div>

  <div
    class="form-group hotSauce"
    (mouseenter)="mouseEnter()"
    (mouseleave)="mouseLeave()"
  >
    <input
      type="text"
      [ngClass]="{
        'is-invalid': hasErrors('lineOfDescent') && isTouched('lineOfDescent'),
        'is-valid': !hasErrors('lineOfDescent') && isTouched('lineOfDescent')
      }"
      class="form-control form-control-lg"
      formControlName="lineOfDescent"
      placeholder="Line of Descent"
      #hoverBtn
      [popover]="
        'Please enter your lineage from William F. Crowe 1793.  Example: William F. Crowe, Frederick G Crowe, Nathan Peter Crowe'
      "
      [outsideClick]="true"
      position="absolute"
      id="lineOfDescent"
    />
  </div>
  <div *ngIf="hasError('lineOfDescent', 'minlength')" class="invalid-feedback">
    Line of Descent Must Have at Least One Name.
  </div>
  <div class="form-group">
    <input
      type="text"
      [ngClass]="{
        'is-invalid': hasErrors('username') && isTouched('username'),
        'is-valid': !hasErrors('username') && isTouched('username')
      }"
      class="form-control form-control-lg"
      formControlName="username"
      placeholder="Username"
      title="Please enter your username."
      id="username"
    />

    <div *ngIf="hasError('username', 'required')" class="invalid-feedback">
      Username is required
    </div>

    <div
      *ngIf="
        hasError('username', 'minlength') || hasError('username', 'maxlength')
      "
      class="invalid-feedback"
    >
      Must be between 5-20 characters
    </div>
  </div>

  <div class="form-group">
    <input
      type="text"
      [ngClass]="{
        'is-invalid': hasErrors('email') && isTouched('email'),
        'is-valid': !hasErrors('email') && isTouched('email')
      }"
      class="form-control form-control-lg"
      formControlName="email"
      placeholder="Email"
      title="Please enter your email used for your account."
      id="email"
    />
    <div *ngIf="hasError('email', 'required')" class="invalid-feedback">
      Email is required
    </div>

    <div *ngIf="hasError('email', 'pattern')" class="invalid-feedback">
      Invalid email format
    </div>

    <div *ngIf="hasError('email', 'maxlength')" class="invalid-feedback">
      Can be at most 30 characters
    </div>
  </div>

  <div class="form-group">
    <input
      type="password"
      [ngClass]="{
        'is-invalid': hasErrors('password') && isTouched('password'),
        'is-valid': !hasErrors('password') && isTouched('password')
      }"
      class="form-control form-control-lg"
      formControlName="password"
      placeholder="Password"
      title="Please enter your password."
      id="password"
    />

    <div *ngIf="hasError('password', 'required')" class="invalid-feedback">
      Password is required
    </div>

    <div
      *ngIf="
        hasError('password', 'minlength') || hasError('password', 'maxlength')
      "
      class="invalid-feedback"
    >
      Must be between 10-50 characters
    </div>
  </div>

  <div class="form-group">
    <input
      type="password"
      [ngClass]="{
        'is-invalid':
          (formHasError('isMatching') || hasErrors('confirmPassword')) &&
          isTouched('confirmPassword'),
        'is-valid':
          !formHasError('isMatching') &&
          !hasErrors('confirmPassword') &&
          isTouched('confirmPassword')
      }"
      class="form-control form-control-lg"
      formControlName="confirmPassword"
      placeholder="Confirm Password"
      title="Please re-enter your password to confirm it."
    />

    <div
      *ngIf="hasError('confirmPassword', 'required')"
      class="invalid-feedback"
    >
      Confirm Password is required
    </div>

    <div *ngIf="formHasError('isMatching')" class="invalid-feedback">
      Passwords do not match
    </div>
  </div>

  <button
    class="btn btn-block mb-3 bg-primary text-light"
    [disabled]="!registerForm.valid"
  >
    Register
  </button>
</form>
